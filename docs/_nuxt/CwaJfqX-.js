import{g as C,a as H,b as O}from"./Bw8qkP5M.js";import{a as b,V as I}from"./Dq8kvWUj.js";import{b as R,n as x,c as B}from"./DAimvJTD.js";import{V as Z}from"./D3afzE0e.js";import{q as P,r as N,x as A,o as i,y as S,w as o,b as s,A as c,a as l,t as m,d as p,_ as D,s as L,c as g,F as M,C as T,at as w,p as V,e as E,as as j}from"./w-K6hUYo.js";import{_ as z}from"./CFqqdv3b.js";import{_ as k}from"./DlAUqK2U.js";const F={class:"spread pa-0 text-h5"},K={class:"caption"},W={class:"mr-10"},q={__name:"PhotoPreview",props:["photo"],setup(t){const f=t,n=P(()=>f.photo),u=()=>{window.open(n.paths.original,"_blank")},v=C(n.value);H(n.value);const y=O(n.value),e=N(A());return(d,h)=>(i(),S(I,{class:"my-2"},{default:o(()=>[s(b,{cols:"12",md:"8"},{default:o(()=>[s(R,{src:c(n).paths.w1080,"lazy-src":c(n).paths.preview,onClick:u,contain:""},null,8,["src","lazy-src"])]),_:1}),s(b,{cols:"12",md:"4"},{default:o(()=>[s(I,null,{default:o(()=>[s(b,{cols:"auto"},{default:o(()=>[l("h2",F,m(c(n).title||c(n).filename),1),l("span",K,m(c(v)),1)]),_:1}),s(Z),s(b,{cols:"auto"},{default:o(()=>[l("span",W,[s(x,null,{default:o(()=>[p("mdi-camera-iris")]),_:1}),p(" "+m(c(n).aperture),1)]),l("span",null,[s(x,null,{default:o(()=>[p("mdi-alarm")]),_:1}),p(" "+m(c(n).shutterspeed)+" s ",1)])]),_:1}),c(e).smAndDown?D("",!0):(i(),S(b,{key:0,cols:"12",class:"text-body2"},{default:o(()=>[p(m(c(y)),1)]),_:1})),c(e).smAndDown?(i(),S(b,{key:1,cols:"12",class:"caption"},{default:o(()=>[p(m(c(y)),1)]),_:1})):D("",!0)]),_:1})]),_:1})]),_:1}))}},G=q,J=["innerHTML"],Q={__name:"PostRender",props:["markdown"],setup(t){const f=t,n=L(),u=e=>(e=e.replace(/### (.+?)\n/g,"<h4>$1</h4>"),e=e.replace(/## (.+?)\n/g,"<h3>$1</h3>"),e=e.replace(/# (.+?)\n/g,"<h2>$1</h2>"),e=e.replace(/\n/g," "),e=e.replace(/\s{2,}/g,"<br>"),e=e.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*(.+?)\*/g,"<em>$1</em>"),e=e.replace(/!\[([^\]]+?)\]\(([^)]+?)\)/g,'<img class="post-img" src="$2" alt="$1">'),e=e.replace(/\[([^\]]+?)\]\(([^)]+?)\)/g,'<a href="$2">$1</a>'),e),v=e=>{const d=[],h=/!([A-Z]+)\(([^)]+)\)/g;let r=0,_;for(;(_=h.exec(e))!==null;){r!==_.index&&d.push({type:"HTML",data:e.slice(r,_.index)});const[,$,a]=_;d.push({type:$,data:a.split("|")}),r=_.index+_[0].length}return r<e.length&&d.push({type:"HTML",data:e.slice(r)}),d},y=P(()=>v(u(f.markdown)));return(e,d)=>{const h=G;return i(),g("div",null,[(i(!0),g(M,null,T(c(y),r=>(i(),g("div",{key:r.type},[r.type==="HTML"?(i(),g("div",{key:0,innerHTML:r.data},null,8,J)):r.type==="PHOTO"&&c(n).byName(r.data[0])?(i(),S(h,{key:1,photo:c(n).byName(r.data[0])},null,8,["photo"])):D("",!0)]))),128))])}}},U=Q,X={},Y=t=>(V("data-v-e991db7d"),t=t(),E(),t),tt={class:"timeline-item"},et={class:"timeline-date"},ot={class:"timeline-circle"},st=Y(()=>l("div",{class:"timeline-line"},null,-1)),nt={class:"timeline-content"};function at(t,f){return i(),g("div",tt,[l("div",et,[w(t.$slots,"date",{},void 0,!0)]),l("div",ot,[w(t.$slots,"icon",{},void 0,!0)]),st,l("div",nt,[w(t.$slots,"content",{},void 0,!0)])])}const lt=k(X,[["render",at],["__scopeId","data-v-e991db7d"]]),ct={},it=t=>(V("data-v-43a6bb9c"),t=t(),E(),t),rt={class:"timeline-item"},dt={class:"timeline-circle"},_t=it(()=>l("div",{class:"timeline-line"},null,-1)),pt={class:"timeline-content"};function ut(t,f){return i(),g("div",rt,[l("div",dt,[w(t.$slots,"icon",{},void 0,!0)]),_t,l("div",pt,[w(t.$slots,"content",{},void 0,!0)])])}const ht=k(ct,[["render",ut],["__scopeId","data-v-43a6bb9c"]]),mt={props:{photo:Object,location:String,text:String},setup(t){const f=()=>{window.open(t.photo.paths.original,"_blank")},n=P(()=>new Date(t.photo.date).toLocaleDateString("sv-SE",{day:"2-digit",month:"long",year:"numeric"})),u=P(()=>new Date(t.photo.date).toLocaleDateString("sv-SE",{month:"long"})),v=P(()=>t.photo.description||t.photo.location&&`Photograph ${t.photo.filename} was photographed in ${t.photo.location.title} with a ${t.photo.lens} during ${u.value}.`||`Photograph ${t.photo.filename} was photographed during ${u.value} with a ${t.photo.lens}.`);return{open:f,date:n,month:u,description:v}}},ft=["src"],yt={style:{display:"flex","flex-direction":"column","justify-content":"space-between",height:"100%"}};function gt(t,f,n,u,v,y){return i(),g("div",null,[s(I,{justify:"start","no-gutters":""},{default:o(()=>[s(b,{cols:"5"},{default:o(()=>[s(B,{to:t.localePath("/photography/"+n.photo.filename)},{default:o(()=>[l("img",{src:n.photo.paths.w400,width:"100%"},null,8,ft)]),_:1},8,["to"])]),_:1}),s(b,{class:"pa-1"},{default:o(()=>[l("div",yt,[l("div",null,[w(t.$slots,"content")]),l("div",null,[l("div",null,[s(x,{class:"pa-0",small:""},{default:o(()=>[p("mdi-calendar-today-outline")]),_:1}),p(" "+m(u.date),1)]),l("div",null,[s(x,{class:"pa-0",small:""},{default:o(()=>[p("mdi-map-marker")]),_:1}),p(" "+m(n.location),1)])])])]),_:3})]),_:3})])}const $t=k(mt,[["render",gt]]),vt={class:"text-h2"},bt={class:"text-h3"},St={__name:"Post",props:["post"],setup(t){const f=N(A()),n=L(),u=j(),v=y=>{if(!y)return[];const e=y.split(/(![A-Z]+\{.+\})|\!END/).filter(Boolean),d=[];let h=null,r=null;return e.forEach(_=>{if(_.match(/![A-Z]+\{.+\}/)){const $=_.match(/\{(.*)\}/)[1].split(","),a=_.match(/!([A-Z]+)\{/)[1];h=a,r=$,d.push({type:a,args:$,body:""})}else h?(d.find($=>$.type===h&&$.args===r).body=_,h=null):_!==`
`&&d.push({type:"MARKDOWN",body:_})}),d};return(y,e)=>{const d=U,h=z,r=lt,_=ht,$=$t;return i(),g("div",null,[l("h1",vt,m(t.post.title),1),(i(!0),g(M,null,T(v(t.post.content),a=>(i(),g("div",{key:a.type},[a.type==="MARKDOWN"?(i(),S(d,{key:0,markdown:a.body,class:"mb-2"},null,8,["markdown"])):D("",!0),a.type==="TIMELINE"&&!c(f).smAndDown?(i(),S(r,{key:1},{icon:o(()=>[s(h,{to:y.localePath("/locations/"+a.args[0])},{default:o(()=>[s(x,{class:"pa-0"},{default:o(()=>[p("mdi-map-marker")]),_:1})]),_:2},1032,["to"])]),date:o(()=>[p(m(a.args[1]),1)]),content:o(()=>[l("h2",null,m(c(u).byName(a.args[0]).title),1),s(d,{markdown:a.body},null,8,["markdown"])]),_:2},1024)):a.type==="TIMELINE"&&c(f).smAndDown?(i(),S(_,{key:2},{icon:o(()=>[s(h,{to:y.localePath("/locations/"+a.args[0])},{default:o(()=>[s(x,{class:"pa-0",large:""},{default:o(()=>[p("mdi-map-marker")]),_:1})]),_:2},1032,["to"])]),content:o(()=>[l("h2",bt,m(c(u).byName(a.args[0]).title),1),s(d,{markdown:a.body},null,8,["markdown"])]),_:2},1024)):a.type==="SPHOTO"?(i(),S($,{key:3,photo:c(n).byName(a.args[0]),location:a.args[1]},{content:o(()=>[s(d,{markdown:a.body},null,8,["markdown"])]),_:2},1032,["photo","location"])):D("",!0)]))),128))])}}},At=St;export{At as _};
