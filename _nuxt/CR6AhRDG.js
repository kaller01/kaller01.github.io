import{_ as ae}from"./C0lzjpnL.js";import{V as j,a as D}from"./DQZjFRBs.js";import{V as oe}from"./CYBTnqar.js";import{m as ne,a as le,u as J}from"./DB2QJgr0.js";import{d as ie,e as se,c as T,f as R,g as re}from"./CFvBtnNI.js";import{E as X,P as Q,G as ce,H as Y,K as ue,I as de,Q as ee,q as c,Z as me,_ as fe,L as ge,$ as te,b as t,F,S as I,d as w,r as O,x as E,o as h,y as A,w as a,a as p,t as C,A as i,a0 as ve,N as _e,a1 as N,V as he,a2 as z,u as pe,a3 as ye,s as be,v as xe,c as $,z as Ve,C as W}from"./CPXz-x3s.js";import{V as B}from"./Ce9cG3nT.js";import{_ as Se}from"./BVhGJ6wg.js";import{a as ke,V as Z}from"./DtatOHAU.js";import{f as we}from"./C-GTDzx5.js";import{u as Ie}from"./kYAn8I-8.js";import{d as Le}from"./P4nmuCoM.js";import{V as Ce}from"./B-h3ae1-.js";import"./CTt98_cw.js";import"./CtV6MPKr.js";import"./DlAUqK2U.js";const Pe=X({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Q,default:"$ratingEmpty"},fullIcon:{type:Q,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...ne(),...ie(),...se(),...le(),...ce()},"VRating"),$e=Y()({name:"VRating",props:Pe(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:n}=g;const{t:v}=ue(),{themeClasses:y}=de(e),_=ee(e,"modelValue"),r=c(()=>me(parseFloat(_.value),0,+e.length)),x=c(()=>fe(Number(e.length),1)),V=c(()=>x.value.flatMap(o=>e.halfIncrements?[o-.5,o]:[o])),b=ge(-1),S=c(()=>V.value.map(o=>{const l=e.hover&&b.value>-1,s=r.value>=o,d=b.value>=o,L=(l?d:s)?e.fullIcon:e.emptyIcon,H=e.activeColor??e.color,M=s||d?H:e.color;return{isFilled:s,isHovered:d,icon:L,color:M}})),m=c(()=>[0,...V.value].map(o=>{function l(){b.value=o}function s(){b.value=-1}function d(){e.disabled||e.readonly||(_.value=r.value===o&&e.clearable?0:o)}return{onMouseenter:e.hover?l:void 0,onMouseleave:e.hover?s:void 0,onClick:d}})),f=c(()=>e.name??`v-rating-${te()}`);function u(o){var G,K;let{value:l,index:s,showStar:d=!0}=o;const{onMouseenter:P,onMouseleave:L,onClick:H}=m.value[s+1],M=`${f.value}-${String(l).replace(".","-")}`,q={color:(G=S.value[s])==null?void 0:G.color,density:e.density,disabled:e.disabled,icon:(K=S.value[s])==null?void 0:K.icon,ripple:e.ripple,size:e.size,variant:"plain"};return t(F,null,[t("label",{for:M,class:{"v-rating__item--half":e.halfIncrements&&l%1>0,"v-rating__item--full":e.halfIncrements&&l%1===0},onMouseenter:P,onMouseleave:L,onClick:H},[t("span",{class:"v-rating__hidden"},[v(e.itemAriaLabel,l,e.length)]),d?n.item?n.item({...S.value[s],props:q,value:l,index:s,rating:r.value}):t(B,I({"aria-label":v(e.itemAriaLabel,l,e.length)},q),null):void 0]),t("input",{class:"v-rating__hidden",name:f.value,id:M,type:"radio",value:l,checked:r.value===l,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function k(o){return n["item-label"]?n["item-label"](o):o.label?t("span",null,[o.label]):t("span",null,[w("Â ")])}return J(()=>{var l;const o=!!((l=e.itemLabels)!=null&&l.length)||n["item-label"];return t(e.tag,{class:["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},y.value,e.class],style:e.style},{default:()=>[t(u,{value:0,index:-1,showStar:!1},null),x.value.map((s,d)=>{var P,L;return t("div",{class:"v-rating__wrapper"},[o&&e.itemLabelPosition==="top"?k({value:s,index:d,label:(P=e.itemLabels)==null?void 0:P[d]}):void 0,t("div",{class:"v-rating__item"},[e.halfIncrements?t(F,null,[t(u,{value:s-.5,index:d*2},null),t(u,{value:s,index:d*2+1},null)]):t(u,{value:s,index:d},null)]),o&&e.itemLabelPosition==="bottom"?k({value:s,index:d,label:(L=e.itemLabels)==null?void 0:L[d]}):void 0])})]})}),{}}}),Te={class:"white--text text-h4 ma-0"},Ae={__name:"LocationHeader",props:["location"],setup(e){const g=e,n=c(()=>g.location);return O(E()),(v,y)=>{const _=ae;return h(),A(T,{dark:"",class:"pa-4 mx-2",style:{height:"48px"}},{default:a(()=>[t(j,{class:"align-center"},{default:a(()=>[p("p",Te,C(i(n).title),1),t(oe),t(_,null,{default:a(()=>[t($e,{modelValue:i(n).rating,"onUpdate:modelValue":y[0]||(y[0]=r=>i(n).rating=r),color:"red","half-increments":"","background-color":"grey","empty-icon":"mdi-heart-outline","half-icon":"mdi-heart-half-full","full-icon":"mdi-heart",class:"mx-3",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},Be=Ae,Me=X({id:String,text:String,...ve(ke({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),U=Y()({name:"VTooltip",props:Me(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:n}=g;const v=ee(e,"modelValue"),{scopeId:y}=Ie(),_=te(),r=c(()=>e.id||`v-tooltip-${_}`),x=O(),V=c(()=>e.location.split(" ").length>1?e.location:e.location+" center"),b=c(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),S=c(()=>e.transition?e.transition:v.value?"scale-transition":"fade-transition"),m=c(()=>I({"aria-describedby":r.value},e.activatorProps));return J(()=>{const f=Z.filterProps(e);return t(Z,I({ref:x,class:["v-tooltip",e.class],style:e.style,id:r.value},f,{modelValue:v.value,"onUpdate:modelValue":u=>v.value=u,transition:S.value,absolute:!0,location:V.value,origin:b.value,persistent:!0,role:"tooltip",activatorProps:m.value,_disableGlobalStack:!0},y),{activator:n.activator,default:function(){var l;for(var u=arguments.length,k=new Array(u),o=0;o<u;o++)k[o]=arguments[o];return((l=n.default)==null?void 0:l.call(n,...k))??e.text}})}),we({},x)}}),Re={class:"title px-3 pt-3 ma-0"},Fe={class:"body-1 px-3 pt-3 ma-0"},Ne={class:"d-flex px-3 py-3 ma-0"},Oe=p("span",null,"Copy link to clipboard",-1),He={__name:"LocationText",props:["location"],setup(e){const g=e,n=c(()=>g.location),v=O(E());return(y,_)=>(h(),A(T,{dark:""},{default:a(()=>[p("p",Re,C(i(n).title),1),p("p",Fe,C(i(n).description),1),p("div",Ne,[t(U,{bottom:""},{activator:a(({on:r})=>[i(v).xlAndUp?_e((h(),A(B,I({key:0},N(r),{href:"https://www.google.com/maps/search/?api=1&query="+i(n).title,height:"36px",class:"mr-2 pa-1",color:"success",target:"_blank"}),{default:a(()=>[w(" Open in maps "),t(R,{class:"pa-0"},{default:a(()=>[w("mdi-google-maps")]),_:1})]),_:2},1040,["href"])),[[he,!i(v).smAndDown]]):z("",!0)]),default:a(()=>[p("span",null,"Open "+C(i(n).title)+" in google maps",1)]),_:1}),i(n).googlealbum?(h(),A(U,{key:0,bottom:""},{activator:a(({on:r})=>[t(B,I(N(r),{height:"36px",class:"mr-2 pa-1",color:"warning",href:i(n).googlealbum,target:"_blank"}),{default:a(()=>[w(" Show album "),t(R,{class:"pa-0"},{default:a(()=>[w("mdi-google-photos")]),_:1})]),_:2},1040,["href"])]),default:a(()=>[p("span",null,"Open album of trip to "+C(i(n).name)+" in google photos",1)]),_:1})):z("",!0),t(U,{right:""},{activator:a(({on:r})=>[]),default:a(()=>[Oe]),_:1})])]),_:1}))}},De=He,Ue={key:0,class:"pa-0 align-center pb-3 d-flex"},ze=["src"],Ee=p("h1",null,"History",-1),it={__name:"[location]",async setup(e){let g,n;const v=pe(),y=ye(),_=c(()=>y.byName(v.params.location)),r=be(),{data:x}=([g,n]=xe(()=>Ve(()=>`/api/locations/${_.value._id}/photos`,"$3huIvaaVbS")),g=await g,n(),g),V=c(()=>r.byIds(x.value)),b=O(E()),S=c(()=>{const m=new Set;return V.value.forEach(f=>{const u=f.date.split("T")[0];m.add(u)}),Array.from(m).map(f=>new Date(f)).sort((f,u)=>u.getTime()-f.getTime())});return(m,f)=>{const u=Be,k=Se,o=De;return h(),$("div",null,[t(Ce,null,{default:a(()=>[i(b).xlAndUp?z("",!0):(h(),$("div",Ue,[t(B,I({height:"48px",class:"pa-0",to:m.localePath("/locations/")},N(m.on)),{default:a(()=>[t(R,{class:"pa-0"},{default:a(()=>[w("mdi-arrow-left")]),_:1})]),_:1},16,["to"]),t(D,{class:"pa-0 ma-0"},{default:a(()=>[t(u,{location:i(_),style:{height:"48px"}},null,8,["location"])]),_:1}),t(B,I(N(m.on),{onClick:f[0]||(f[0]=l=>m.openInMaps()),height:"48px",class:"pa-0",color:"primary"}),{default:a(()=>[t(R,{class:"pa-0"},{default:a(()=>[w("mdi-google-maps")]),_:1})]),_:1},16)])),t(j,{ref:"sidebar"},{default:a(()=>[t(D,{xl:"8",order:"2","order-xl":"1"},{default:a(()=>[p("div",null,[t(T,{dark:"",class:"pa-2"},{default:a(()=>[t(k,{photos:i(V),cols:i(b).xlAndUp?4:3},null,8,["photos","cols"])]),_:1})])]),_:1}),t(D,{cols:"12",xl:"4",order:"1","order-xl":"2"},{default:a(()=>[t(o,{location:i(_)},null,8,["location"]),(h(!0),$(F,null,W(i(_).youtube,l=>(h(),A(T,{dark:"",class:"my-4",key:l},{default:a(()=>[t(re,{"aspect-ratio":16/9,class:"pa-2"},{default:a(()=>[p("iframe",{width:"100%",height:"100%",src:l,frameborder:"0",allow:"",allowfullscreen:""},null,8,ze)]),_:2},1024)]),_:2},1024))),128)),t(T,null,{default:a(()=>[Ee,(h(!0),$(F,null,W(i(S),l=>(h(),$("p",{key:l},C(("dateToString"in m?m.dateToString:i(Le))(l)),1))),128))]),_:1})]),_:1})]),_:1},512)]),_:1})])}}};export{it as default};
